#!/usr/bin/env bash
set -euo pipefail

session_path=$1
session_name=$2

has_session() {
  tmux has-session -t "=${1}" 2>/dev/null
}

switch_to() {
  if [[ -n ${TMUX:-} ]]; then
    exec tmux switch-client -t "=${1}"
  else
    exec tmux attach-session -t "=${1}"
  fi
}

if ! has_session "$session_name"; then
  tmux new-session -ds "$session_name" -c "$session_path"
fi

switch_to "$session_name"
